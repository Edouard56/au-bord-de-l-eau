
<div class="wrapper_home">
  <div class="banner" style="background-image: linear-gradient(-225deg, rgba(0,1,3,0.2) 0%, rgba(123,2,1,0.2) 50%), url(<%= asset_path 'banner_photo.jpg' %>) ">
    <div class="banner-content">
      <h1>Fishing buddy</h1>
      <h2>Find your next fishing trip</h2>
      <div class="banner-form" id="search-form">
        <%= form_tag(boats_path, method: :get, remote: true) do %>
          <%= text_field_tag :search, params[:search]%>
          <%= submit_tag 'Search', class: 'btn btn-treehouse' %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="text-center">
    <h2 id="title"> All available buddies and their boats </h2>
    <div id="boats">
      <%= render 'boats_list', boats: @boats %>
    </div>
      <br>
      <div class="row">
      <div id="map" style="width: 100%; height: 500px;">
        <% content_for(:after_js) do %>
        <script>
          $(document).ready(function() {
            var handler = Gmaps.build('Google');
            handler.buildMap({ provider: { scrollwheel: false, zoomControl: true }, internal: { id: 'map' } }, function() {
              // handler.addMarker({
              //   lat: <%= @search_lat %>,
              //   lng: <%= @search_lng %>,
              // })
              markers = handler.addMarkers(<%= raw @hash.to_json %>);
              handler.bounds.extendWith(markers);
              handler.fitMapToBounds();
              if (markers.length == 0) {
                handler.getMap().setZoom(2);
              } else if (markers.length == 1) {
                handler.getMap().setZoom(13);
              }
            });
          });
          </script>
        <% end %>
      </div>
      </div>
    </div>
  </div>
</div>


